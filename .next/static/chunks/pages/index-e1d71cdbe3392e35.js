(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{1147:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return o},noSSR:function(){return i}});let l=n(4252);n(7876),n(4232);let r=l._(n(2100));function a(e){return{default:(null==e?void 0:e.default)||e}}function i(e,t){return delete t.webpack,delete t.modules,e(t)}function o(e,t){let n=r.default,l={loading:e=>{let{error:t,isLoading:n,pastDelay:l}=e;return null}};e instanceof Promise?l.loader=()=>e:"function"==typeof e?l.loader=e:"object"==typeof e&&(l={...l,...e});let o=(l={...l,...t}).loader;return(l.loadableGenerated&&(l={...l,...l.loadableGenerated},delete l.loadableGenerated),"boolean"!=typeof l.ssr||l.ssr)?n({...l,loader:()=>null!=o?o().then(a):Promise.resolve(a(()=>null))}):(delete l.webpack,delete l.modules,i(n,l))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1650:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return l}});let l=n(4252)._(n(4232)).default.createContext(null)},2100:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return p}});let l=n(4252)._(n(4232)),r=n(1650),a=[],i=[],o=!1;function s(e){let t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then(e=>(n.loading=!1,n.loaded=e,e)).catch(e=>{throw n.loading=!1,n.error=e,e}),n}class c{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function u(e){return function(e,t){let n=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),a=null;function s(){if(!a){let t=new c(e,n);a={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return a.promise()}if(!o){let e=n.webpack&&1?n.webpack():n.modules;e&&i.push(t=>{for(let n of e)if(t.includes(n))return s()})}function u(e,t){s();let i=l.default.useContext(r.LoadableContext);i&&Array.isArray(n.modules)&&n.modules.forEach(e=>{i(e)});let o=l.default.useSyncExternalStore(a.subscribe,a.getCurrentValue,a.getCurrentValue);return l.default.useImperativeHandle(t,()=>({retry:a.retry}),[]),l.default.useMemo(()=>{var t;return o.loading||o.error?l.default.createElement(n.loading,{isLoading:o.loading,pastDelay:o.pastDelay,timedOut:o.timedOut,error:o.error,retry:a.retry}):o.loaded?l.default.createElement((t=o.loaded)&&t.default?t.default:t,e):null},[e,o])}return u.preload=()=>s(),u.displayName="LoadableComponent",l.default.forwardRef(u)}(s,e)}function d(e,t){let n=[];for(;e.length;){let l=e.pop();n.push(l(t))}return Promise.all(n).then(()=>{if(e.length)return d(e,t)})}u.preloadAll=()=>new Promise((e,t)=>{d(a).then(e,t)}),u.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let n=()=>(o=!0,t());d(i,e).then(n,n)})),window.__NEXT_PRELOADREADY=u.preloadReady;let p=u},2936:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9287)}])},8847:(e,t,n)=>{e.exports=n(1147)},9287:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>D});var l=n(7876),r=n(4250),a=n.n(r),i=n(4232),o=n(9209),s=n.n(o);n(1754);var c=n(8847),u=n.n(c),d=n(5364);function p(e,t){let n=String(t||"").toLowerCase(),l=(e||[]).find(e=>String((null==e?void 0:e.key)||"").toLowerCase().replace(/^_/,"")===n);return(null==l?void 0:l.value)||""}async function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"img";try{let n=String(e||"");if(!n)return"";if(/^https:\/\//i.test(n))return n;if(/^data:|^blob:|^http:\/\//i.test(n)){let e=await fetch("/api/upload-design",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataUrl:n,filename:"".concat(t,"-").concat(Date.now(),".png")})}),l=await e.json().catch(()=>({}));return(null==l?void 0:l.url)||""}return""}catch(e){return""}}function b(e){try{let t=new URL("/api/send-design-email",location.origin).toString(),n=JSON.stringify(e);if(navigator.sendBeacon&&n.length<64e3){let e=new Blob([n],{type:"application/json"});navigator.sendBeacon(t,e);return}fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},keepalive:!0,body:n}).then(e=>e.json()).then(e=>{(null==e?void 0:e.ok)||console.warn("[email] not ok",e)}).catch(e=>console.warn("[email] error",e))}catch(e){console.warn("sendEmailNow failed",e)}}function h(e){var t,n,l,r,a;return(null==e||null==(t=e.featuredImage)?void 0:t.url)||(null==e||null==(n=e.image)?void 0:n.url)||(null==e||null==(l=e.image)?void 0:l.src)||Array.isArray(null==e?void 0:e.images)&&((null==(r=e.images[0])?void 0:r.url)||(null==(a=e.images[0])?void 0:a.src))||""}function g(e){let{doNum:t,noNum:n}=e,l=[];return t&&l.push("DO ".concat(t)),n&&l.push("NO ".concat(n)),l.length?l.join(" \xb7 "):"DOBO"}let f={current:null},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CLP";return new Intl.NumberFormat("es-CL",{style:"currency",currency:t,maximumFractionDigits:0}).format(Number(e||0))},y=e=>Number("object"==typeof e?null==e?void 0:e.amount:e||0),x=e=>{var t,n;let l=null==e||null==(n=e.variants)||null==(t=n[0])?void 0:t.price;return l?y(l):y(null==e?void 0:e.minPrice)},w=e=>y(null==e?void 0:e.minPrice),j=e=>e&&e.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])||"",_=(e,t,n)=>'<!doctype html>\n<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">\n<style>*{box-sizing:border-box}body{margin:0;background:#fff;font-family:system-ui,sans-serif}\n.wrap{padding:8px;display:flex;flex-direction:column;align-items:center;gap:8px}\nimg{max-width:100%;height:auto;display:block}\nh4{margin:0;font-size:14px;font-weight:600;text-align:center}\np{margin:0;font-size:12px;line-height:1.35;text-align:center;color:#333}\n</style></head><body><div class="wrap">\n<img src="'.concat(j(e),'" alt=""><h4>').concat(j(t||""),"</h4><p>").concat(j(n||""),"</p>\n</div></body></html>");function S(e){if(!e.visible)return null;let t=function(){let e=window.innerWidth<=768;return{w:e?Math.min(window.innerWidth-24,420):360,h:e?Math.min(Math.floor(.6*window.innerHeight),520):360,centered:e}}(),n={position:"fixed",borderRadius:12,overflow:"hidden",background:"#fff",boxShadow:"0 12px 32px rgba(0,0,0,.24)",zIndex:9999,pointerEvents:"none"},r=t.centered?{...n,left:"50%",bottom:12,transform:"translateX(-50%)",width:t.w,height:t.h}:{...n,left:e.x,top:e.y,width:t.w,height:t.h};return(0,l.jsx)("div",{style:r,children:(0,l.jsx)("iframe",{srcDoc:e.html,style:{width:"100%",height:"100%",border:0,pointerEvents:"none"}})})}function k(e){let{count:t,current:n,onSelect:r,position:a="bottom"}=e;return!t||t<2?null:(0,l.jsxs)("div",{className:"".concat(s().dots," ").concat("top"===a?s().dotsTop:s().dotsBottom),children:[Array.from({length:t}).map((e,t)=>(0,l.jsx)("button",{type:"button",className:"".concat(s().dot," ").concat(t===n?s().dotActive:""),"aria-current":t===n?"true":"false",onClick:()=>r(t)},t)),(0,l.jsxs)("span",{className:s().dotsLabel,children:[n+1,"/",t]})]})}let N=u()(()=>Promise.all([n.e(965),n.e(737)]).then(n.bind(n,737)),{loadableGenerated:{webpack:()=>[737]},ssr:!1});function P(e,t){let n=(t,n,l,r)=>{e.current={active:!0,id:l,x:t,y:n},null!=l&&(null==r?void 0:r.setPointerCapture)&&r.setPointerCapture(l)},l=(t,n)=>{var l;let r=null==(l=e.current)?void 0:l.id;null!=r&&(null==n?void 0:n.releasePointerCapture)&&n.releasePointerCapture(r),e.current={active:!1,id:null,x:0,y:0}},r=(n,r,a,i)=>{let o=e.current;if(!(null==o?void 0:o.active))return;let s=n-o.x,c=r-o.y;Math.abs(s)>12&&Math.abs(s)>Math.abs(c)&&(a.preventDefault(),Math.abs(s)>48&&(s>0?t.prev():t.next(),l(a,i)))};return{onPointerDown:e=>{var t;return n(e.clientX,e.clientY,null!=(t=e.pointerId)?t:null,e.currentTarget)},onPointerMove:e=>r(e.clientX,e.clientY,e,e.currentTarget),onPointerUp:e=>l(e,e.currentTarget),onPointerCancel:e=>l(e,e.currentTarget),onTouchStart:e=>{let t=e.touches[0];n(t.clientX,t.clientY,null,e.currentTarget)},onTouchMove:e=>{let t=e.touches[0];r(t.clientX,t.clientY,e,e.currentTarget)},onTouchEnd:e=>l(e,e.currentTarget),onTouchCancel:e=>l(e,e.currentTarget),onMouseDown:e=>n(e.clientX,e.clientY,null,e.currentTarget),onMouseMove:e=>r(e.clientX,e.clientY,e,e.currentTarget),onMouseUp:e=>l(e,e.currentTarget)}}let C=d.env.NEXT_PUBLIC_SHOP_DOMAIN||"um7xus-0u.myshopify.com";{let e=new URLSearchParams(window.location.search).get("shopDomain");if(e)C=e;else if(document.referrer)try{C=new URL(document.referrer).host||C}catch(e){}}let D=function(){var e;let[t,r]=(0,i.useState)([]),[o,c]=(0,i.useState)([]),[u,d]=(0,i.useState)([]),[j,D]=(0,i.useState)(0),[I,T]=(0,i.useState)(0),[O,A]=(0,i.useState)(null),[E,L]=(0,i.useState)([]),[R,M]=(0,i.useState)(1),[z,U]=(0,i.useState)({visible:!1,x:0,y:0,html:""}),[H,X]=(0,i.useState)(null),[q,B]=(0,i.useState)([]),[W,J]=(0,i.useState)(!1),[F,Y]=(0,i.useState)("Grande"),G=(0,i.useRef)(.5),$=(0,i.useRef)(null),V=(0,i.useRef)(null),K=(0,i.useRef)(null),Q=(0,i.useRef)(null),Z=(0,i.useRef)({active:!1,id:null,x:0,y:0}),ee=(0,i.useRef)({active:!1,id:null,x:0,y:0});(0,i.useRef)(null),(0,i.useRef)(null),(0,i.useRef)(null);let[et,en]=(0,i.useState)(null),el=(0,i.useRef)(!1),er=(0,i.useRef)(!1),ea=(0,i.useRef)(!1),ei=(0,i.useRef)({btn:null,x:0,y:0}),eo=(0,i.useRef)({btn:null,x:0,y:0}),es=(0,i.useRef)(null),ec=(e,t)=>{var n,l;t.current={btn:"mouse"===e.pointerType||"pen"===e.pointerType?e.button:0,x:null!=(n=e.clientX)?n:0,y:null!=(l=e.clientY)?l:0}},eu=(e,t,n)=>{var l,r,a;if(W)return;let i=t.current||{btn:null,x:0,y:0};if(("mouse"===e.pointerType||"pen"===e.pointerType)&&0!==i.btn)return;let o=Math.abs((null!=(l=e.clientX)?l:0)-i.x),s=Math.abs((null!=(r=e.clientY)?r:0)-i.y);if(o>8||s>8)return;let c=e.currentTarget.getBoundingClientRect();((null!=(a=e.clientX)?a:0)-c.left>c.width/2?n.next:n.prev)()},ed={negro:"#000000",blanco:"#ffffff",gris:"#808080","gris claro":"#bfbfbf","gris oscuro":"#4a4a4a",plomo:"#9ea2a2",plata:"#c0c0c0",dorado:"#d4af37",cobre:"#b87333",rojo:"#ff0000",burdeo:"#6d071a",vino:"#7b001c",rosado:"#ff7aa2",rosa:"#ff7aa2",naranjo:"#ff7a00",naranja:"#ff7a00",amarillo:"#ffd400",verde:"#00a65a","verde oliva":"#6b8e23",oliva:"#6b8e23",menta:"#3eb489",azul:"#0066ff",celeste:"#4db8ff",turquesa:"#30d5c8",morado:"#7d3cff",lila:"#b57edc",lavanda:"#b497bd",café:"#6f4e37",marrón:"#6f4e37",cafe:"#6f4e37",chocolate:"#4e2a1e",beige:"#d9c6a5",crema:"#f5f0e6",hueso:"#f2efe6"};(0,i.useEffect)(()=>{var e;(null==(e=window.fabric)?void 0:e.Image)&&(window.fabric.Image.prototype.crossOrigin="anonymous")},[]),(0,i.useEffect)(()=>{let e=e=>{var t;return J(!!(null==(t=e.detail)?void 0:t.editing))};return window.addEventListener("dobo-editing",e),()=>window.removeEventListener("dobo-editing",e)},[]),(0,i.useEffect)(()=>{let e=V.current,t=$.current;if(!e||!t)return;let n=e.style.touchAction,l=t.style.touchAction;return e.style.touchAction=W?"none":"pan-y",t.style.touchAction=W?"none":"pan-y",()=>{e.style.touchAction=n,t.style.touchAction=l}},[W]),(0,i.useEffect)(()=>{let e=V.current;e&&e.style.setProperty("--zoom",String(G.current))},[]),(0,i.useEffect)(()=>{let e=null==f?void 0:f.current;if(!e)return;let t=e.querySelector(".container");if(!t)return;let n=()=>{try{let n=Math.max(0,(t.scrollWidth-e.clientWidth)/2);e.scrollLeft=n}catch(e){}};n();let l=()=>n();return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),(0,i.useEffect)(()=>{let e=!1;return(async()=>{try{let t=encodeURIComponent(F),[n,l,a]=await Promise.all([fetch("/api/products?size=".concat(t,"&type=maceta&first=60"),{cache:"no-store"}),fetch("/api/products?size=".concat(t,"&type=planta&first=60"),{cache:"no-store"}),fetch("/api/products?type=accesorio&first=60",{cache:"no-store"})]);if(!n.ok)throw Error("pots HTTP ".concat(n.status));if(!l.ok)throw Error("plants HTTP ".concat(l.status));let i=await n.json(),o=await l.json(),s=a.ok?await a.json():[],u=Array.isArray(i)?i:i.products||[],p=Array.isArray(o)?o:o.products||[],m=Array.isArray(s)?s:s.products||[],b=e=>e.map(e=>{var t,n;return{...e,description:(null==e?void 0:e.description)||(null==e?void 0:e.descriptionHtml)||(null==e?void 0:e.body_html)||"",descriptionHtml:(null==e?void 0:e.descriptionHtml)||"",tags:Array.isArray(null==e?void 0:e.tags)?e.tags:[],variants:Array.isArray(null==e?void 0:e.variants)?e.variants:[],image:(null==e||null==(t=e.image)?void 0:t.src)||(null==e?void 0:e.image)||Array.isArray(null==e?void 0:e.images)&&(null==(n=e.images[0])?void 0:n.src)||"",minPrice:(null==e?void 0:e.minPrice)||{amount:0,currencyCode:"CLP"}}});if(e)return;let h=b(u),g=b(p),f=b(m);c(h),r(g),d(f),T(e=>Math.min(Math.max(e,0),Math.max(h.length-1,0))),D(e=>Math.min(Math.max(e,0),Math.max(g.length-1,0))),er.current=!1}catch(t){console.error("Error fetching products:",t),e||(r([]),c([]),d([]))}})(),()=>{e=!0}},[F]),(0,i.useEffect)(()=>{(()=>{if(el.current||!Array.isArray(o)||!Array.isArray(t)||0===o.length&&0===t.length)return;let e=et||{},n=new URLSearchParams(window.location.search),l=(n.get("size")||e.size||e.tamano||e.tamaño||"").toLowerCase(),r=(n.get("pot")||n.get("potHandle")||e.potHandle||e.potTitle||e.potId||"").toLowerCase(),a=(n.get("plant")||n.get("plantHandle")||e.plantHandle||e.plantTitle||e.plantId||"").toLowerCase(),i=e=>String(e||"").toLowerCase().trim(),s=e=>{let t=String(e||"");return t.includes("gid://")?t.split("/").pop():t},c=(e,t)=>{if(!t)return -1;let n=i(t),l=s(n);return e.findIndex(e=>{let t=[null==e?void 0:e.id,s(null==e?void 0:e.id),null==e?void 0:e.handle,null==e?void 0:e.title].map(i);return t.includes(n)||t.includes(i(l))})},u=!1;l&&(l.startsWith("p")?(Y("Peque\xf1o"),u=!0):l.startsWith("m")?(Y("Mediano"),u=!0):l.startsWith("g")&&(Y("Grande"),u=!0));let d=c(o,r);d>=0&&(T(d),u=!0);let p=c(t,a);p>=0&&(D(p),u=!0),e.color&&(X(e.color),u=!0),u&&(el.current=!0)})()},[o,t,et]),(0,i.useEffect)(()=>{if(ea.current)return;let e=es.current;if(!e||!o.length||!t.length)return;let n=e=>String(e||"").toLowerCase().trim(),l=e=>String(e||"").includes("gid://")?String(e).split("/").pop():String(e||""),r=(e,t)=>{if(!t)return -1;let r=n(t),a=n(l(t));return e.findIndex(e=>{let t=[null==e?void 0:e.id,l(null==e?void 0:e.id),null==e?void 0:e.handle,null==e?void 0:e.title].map(n);return t.includes(r)||t.includes(a)})},a=e.size||e.tamano||e.tamaño;if(!er.current&&a){let e=n(a);["p","peque\xf1o","pequeno","peque\xf1a","pequena"].includes(e)?Y("Peque\xf1o"):["m","mediano","mediana"].includes(e)?Y("Mediano"):["g","grande"].includes(e)&&Y("Grande")}let i=r(o,e.potId||e.pot||e.potHandle||e.potTitle),s=r(t,e.plantId||e.plant||e.plantHandle||e.plantTitle);i>=0&&T(i),s>=0&&D(s),e.color&&X(e.color),ea.current=!0},[o,t]),(0,i.useEffect)(()=>{let e=$.current,t=V.current;if(!e||!t)return;G.current=G.current||1,t.style.setProperty("--zoom",String(G.current));let n=G.current,l=0,r=r=>{if(!t.contains(r.target))return;r.preventDefault();let a=r.deltaY>0?-.08:.08;G.current=Math.min(2.5,Math.max(.5,G.current+a)),n=G.current,l||(l=requestAnimationFrame(()=>{l=0,t.style.setProperty("--zoom",String(n)),e.style.setProperty("--zoom",String(n))}))};return e.addEventListener("wheel",r,{passive:!1}),()=>{e.removeEventListener("wheel",r),l&&cancelAnimationFrame(l)}},[]);let ep=(0,i.useRef)(!1);async function em(){let e=null==V?void 0:V.current;if(!e)return null;let{default:t}=await n.e(366).then(n.t.bind(n,3028,23));return(await t(e,{backgroundColor:"#eeeaeaff",scale:3,useCORS:!0,onclone:e=>{let t=e.querySelector('[data-capture-stage="1"]')||e.body;t.style.overflow="visible",t.style.clipPath="none";let n=(t,n)=>{let l=e.querySelector(t);l&&(Array.from(l.children).forEach((e,t)=>{t!==n&&e.remove()}),l.style.transform="none",l.style.width="100%")};n('[data-capture="pot-track"]',I),n('[data-capture="plant-track"]',j),['[data-capture="pot-container"]','[data-capture="plant-container"]'].forEach(t=>{let n=e.querySelector(t);n&&(n.style.overflow="visible",n.style.clipPath="none")})}})).toDataURL("image/png")}async function eb(){let e="";try{let t=await em();if(t){let n=await fetch("/api/upload-design",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataUrl:t})}),l=await n.json();if(!n.ok)throw Error((null==l?void 0:l.error)||"Error al subir preview");e=l.url||""}}catch(e){}let n=o[I],l=t[j];return[{key:"_DesignPreview",value:e},{key:"_DesignId",value:String(Date.now())},{key:"_DesignPlant",value:(null==l?void 0:l.id)||""},{key:"_DesignPot",value:(null==n?void 0:n.id)||""},{key:"_DesignColor",value:H||""},{key:"_DesignSize",value:F||""},{key:"_LinePriority",value:"0"}]}async function eh(e){try{var n,l,r,a,i,s,c,u,d,p,m,b,h,g,f,v,y;let x,w=await eg(2e4);if(!w)return{ok:!1,error:"designer-not-ready"};let _=null!=(f=null!=(g=null!=(h=null!=(b=null==(n=w.exportDesignSnapshot)?void 0:n.call(w))?b:null==(l=w.exportSnapshot)?void 0:l.call(w))?h:null==(r=w.exportJSON)?void 0:r.call(w))?g:null==(a=w.toJSON)?void 0:a.call(w))?f:null==(i=w.getState)?void 0:i.call(w);if(_||"function"!=typeof loadLocalDesign||(_=loadLocalDesign()),!_)return{ok:!1,error:"no-snapshot"};let S=null;try{S=await em()}catch(e){}if(!S){let e=(null==(v=w.getCanvas)?void 0:v.call(w))||w.canvas||document.querySelector("canvas");try{S=(null==e||null==(y=e.toDataURL)?void 0:y.call(e,"image/png"))||null}catch(e){}}if(!S)return{ok:!1,error:"no-preview"};let k={potId:(null==(s=o[I])?void 0:s.id)||"",potTitle:(null==(c=o[I])?void 0:c.title)||"",potHandle:(null==(u=o[I])?void 0:u.handle)||"",plantId:(null==(d=t[j])?void 0:d.id)||"",plantTitle:(null==(p=t[j])?void 0:p.title)||"",plantHandle:(null==(m=t[j])?void 0:m.handle)||"",color:H||"",size:F||""},N=await fetch("/api/publish-by-variant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({variantId:e,previewDataURL:S,design:_,meta:k})}),P=await N.text();try{x=JSON.parse(P)}catch(e){x={ok:!1,error:P}}if(!N.ok||!(null==x?void 0:x.ok)){let e=(null==x?void 0:x.error)?"".concat(x.error).concat(x.stage?" @"+x.stage:""):"HTTP ".concat(N.status);return{ok:!1,error:e}}return x}catch(e){return{ok:!1,error:String((null==e?void 0:e.message)||e)}}}async function eg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e4,t=null,n=!1,l=e=>{t=e&&e.detail||window.doboDesignAPI,n=!0};window.addEventListener("dobo:ready",l,{once:!0});let r=Date.now();for(;Date.now()-r<e&&!n;){let e=window.doboDesignAPI;if(e&&(e.exportDesignSnapshot||e.exportSnapshot||e.exportJSON||e.toJSON||e.getState)){t=e;break}await new Promise(e=>setTimeout(e,100))}return window.removeEventListener("dobo:ready",l),t||null}function ef(e,t,n,l,r,a){let i=e=>String(e||"").trim(),o=e=>/^\d+$/.test(i(e)),s=e=>{let t=i(e);return t.includes("gid://")?t.split("/").pop():t},c=o(t)?i(t):s(t);if(!o(c))throw Error("Variant principal inv\xe1lido");let u=(r||[]).map(e=>o(e)?i(e):s(e)).filter(o),d=document.createElement("form");d.method="POST",d.target="_top",d.action="https://".concat(e,"/cart/add");let p=(e,t)=>{let n=document.createElement("input");n.type="hidden",n.name=e,n.value=String(t),d.appendChild(n)},m=0,b=e=>{var t;let n=String(e||"").toLowerCase();return(null==(t=(l||[]).find(e=>{let t=String((null==e?void 0:e.key)||"").toLowerCase();return t===n||t==="_".concat(n)}))?void 0:t.value)||""},h=b("DesignPreview"),g=b("DesignId"),f=b("DesignPlant"),v=b("DesignPot"),y=b("DesignColor"),x=b("DesignSize"),w=b("Layer:Image")||b("LayerImage")||b("_LayerImage"),j=b("Layer:Text")||b("LayerText")||b("_LayerText");p("items[".concat(m,"][id]"),c),p("items[".concat(m,"][quantity]"),String(n||1)),p("items[".concat(m,"][properties][_LinePriority]"),"0"),h&&p("items[".concat(m,"][properties][_DesignPreview]"),h),g&&p("items[".concat(m,"][properties][_DesignId]"),g),f&&p("items[".concat(m,"][properties][_DesignPlant]"),f),v&&p("items[".concat(m,"][properties][_DesignPot]"),v),y&&p("items[".concat(m,"][properties][_DesignColor]"),y),x&&p("items[".concat(m,"][properties][_DesignSize]"),x),w&&p("items[".concat(m,"][properties][_LayerImage]"),w),j&&p("items[".concat(m,"][properties][_LayerText]"),j),m++,u.forEach(e=>{p("items[".concat(m,"][id]"),e),p("items[".concat(m,"][quantity]"),"1"),p("items[".concat(m,"][properties][_Accessory]"),"true"),p("items[".concat(m,"][properties][_LinePriority]"),"1"),m++}),a&&p("return_to",a),document.body.appendChild(d),d.submit()}(0,i.useEffect)(()=>{if(ep.current||!Array.isArray(o)||!Array.isArray(t)||0===o.length&&0===t.length)return;let e=es.current||{},n=new URLSearchParams(window.location.search),l=(n.get("size")||e.size||e.tamano||e.tamaño||"").toLowerCase(),r=(n.get("pot")||n.get("potHandle")||e.potHandle||e.potTitle||e.potId||"").toLowerCase(),a=(n.get("plant")||n.get("plantHandle")||e.plantHandle||e.plantTitle||e.plantId||"").toLowerCase();l&&(l.startsWith("p")?Y("Peque\xf1o"):l.startsWith("m")?Y("Mediano"):l.startsWith("g")&&Y("Grande"));let i=e=>String(e||"").toLowerCase().trim(),s=e=>{let t=String(e||"");return t.includes("gid://")?t.split("/").pop():t},c=(e,t)=>{if(!t)return -1;let n=i(t),l=s(n);return e.findIndex(e=>{let t=[null==e?void 0:e.id,s(null==e?void 0:e.id),null==e?void 0:e.handle,null==e?void 0:e.title].map(i);return t.includes(n)||t.includes(i(l))})},u=c(o,r);u>=0&&T(u);let d=c(t,a);d>=0&&D(d),e.color&&X(e.color),ep.current=!0},[o,t]),(0,i.useEffect)(()=>{let e=o[I];if(!e){B([]),A(null);return}let t=(e.variants||[]).filter(e=>!!e.image),n=e=>(null!=e?e:"").toString().trim().toLowerCase(),l=[...new Set(t.flatMap(e=>(e.selectedOptions||[]).filter(e=>"color"===n(e.name)).map(e=>e.value)))];B(l);let r=(e,t)=>{let l=e.selectedOptions||[];return!t||l.some(e=>"color"===n(e.name)&&n(e.value)===n(t))};if(!(H&&t.some(e=>r(e,H)))){let e=l.find(e=>t.some(t=>r(t,e)));e&&X(e)}A(t.find(e=>r(e,H))||t[0]||null)},[o,I,H]);let ev=()=>(E||[]).map(e=>{var t,n,l;return null==u||null==(l=u[e])||null==(n=l.variants)||null==(t=n[0])?void 0:t.id}).map(e=>{let t=String(e||"");return t.includes("gid://")?t.split("/").pop():t}).filter(e=>/^\d+$/.test(e));async function ey(){try{var e,n,l,r,a,i,s,c,u,d,f,v;let _=await eb();if(!await eg(2e4))throw Error("designer-not-ready");let S=(null==(n=window.doboDesignAPI)||null==(e=n.getCanvas)?void 0:e.call(n))||null;if(!S)throw Error("canvas-missing");let k=h(null==o?void 0:o[I]),N=h(null==t?void 0:t[j]),P=e=>2e3>(e||"").length,D=e=>!!e&&(!!e&&(/text/i.test(e.type||"")||"string"==typeof e.text)||Array.isArray(e._objects)&&e._objects.some(D)),T=e=>!!e&&((e=>{if(!e)return!1;let t=(e.name||e.id||e.doboKind||e.role||"").toLowerCase();return/(^(base|pot|maceta|plant|planta|bg|background)$)|(^|_|-)(pot|maceta|plant|planta|base|bg|background)(_|-|$)/.test(t)})(e)||Array.isArray(e._objects)&&e._objects.some(T)),A=[],E=e=>{var t,n;let l=t=>{t&&(e(t)&&(A.push(t),t.__vis=t.visible,t.visible=!1),Array.isArray(t._objects)&&t._objects.forEach(l))};if(((null==(t=S.getObjects)?void 0:t.call(S))||[]).forEach(l),S.backgroundImage&&e(S.backgroundImage)){let e=S.backgroundImage;A.push(e),e.__vis=e.visible,e.visible=!1}null==(n=S.requestRenderAll)||n.call(S)},L=()=>{var e;A.forEach(e=>{e.visible=!1!==e.__vis,delete e.__vis}),A.length=0,null==(e=S.requestRenderAll)||e.call(S)},M=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return S.toDataURL({format:"png",multiplier:e,backgroundColor:null})},z=e=>new Promise((t,n)=>{if(!e)return n(Error("no-url"));let l=new Image;l.crossOrigin="anonymous",l.onload=()=>t(l),l.onerror=e=>n(e),l.src=e}),U=async e=>{let{overlayAllUrl:t,potUrl:n,plantUrl:l}=e,[r,a,i]=await Promise.all([z(t),n?z(n).catch(()=>null):Promise.resolve(null),l?z(l).catch(()=>null):Promise.resolve(null)]),o=r.naturalWidth||r.width||1024,s=r.naturalHeight||r.height||1024,c=document.createElement("canvas");c.width=o,c.height=s;let u=c.getContext("2d");return a&&u.drawImage(a,0,0,o,s),i&&u.drawImage(i,0,0,o,s),u.drawImage(r,0,0,o,s),c.toDataURL("image/png")};await new Promise(e=>setTimeout(e,50)),E(e=>T(e)||e===S.backgroundImage);let X=M(2);L(),E(e=>T(e)||e===S.backgroundImage),E(e=>!D(e));let q=M(2);L(),E(e=>T(e)||e===S.backgroundImage),E(e=>D(e));let B=M(2);L();let W="";try{W=await U({overlayAllUrl:X,potUrl:k,plantUrl:N})}catch(e){W=M(2)}P(q)&&(q=""),P(B)&&X&&!P(X)&&(B=X);let J=p(_,"designpreview"),Y=J||W||X;X=await m(X,"overlay-all"),B=await m(B,"layer-image"),q=q?await m(q,"layer-text"):"";let G=await m(Y,"preview-full"),$=(e,t)=>{t&&(_=[..._.filter(t=>t.key!==e&&t.key!=="_".concat(e)),{key:e,value:t}])};$(J?"Preview:Full":"DesignPreview",G),$("Overlay:All",X),$("Layer:Image",B),$("Layer:Text",q);let V=(null==O?void 0:O.price)?y(O.price):x(o[I]),K=w(t[j]),Q=Number(((V+K)*R).toFixed(2)),Z=J||G||X,ee=await fetch("/api/design-product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"DOBO ".concat(null==(l=t[j])?void 0:l.title," + ").concat(null==(r=o[I])?void 0:r.title),previewUrl:Z,price:Q,color:H||"\xdanico",size:F||"\xdanico",designId:null==(a=_.find(e=>"_DesignId"===e.key))?void 0:a.value,plantTitle:(null==(i=t[j])?void 0:i.title)||"Planta",potTitle:(null==(s=o[I])?void 0:s.title)||"Maceta"})}),et=await ee.json();if(!ee.ok||!(null==et?void 0:et.variantId))throw Error((null==et?void 0:et.error)||"No se cre\xf3 el producto DOBO");let en=((null==(c=_.find(e=>"_DesignId"===e.key))?void 0:c.value)||"").toString().slice(-8).toUpperCase(),el=String(et.variantId||"").includes("gid://")?String(et.variantId).split("/").pop():String(et.variantId);if($("_DO",en),$("_NO",el),!await eg(2e4))throw Error("designer-not-ready");let er=await eh(et.variantId);if(!(null==er?void 0:er.ok))throw Error((null==er?void 0:er.error)||"publish failed");let ea=("DOBO ".concat(null!=(f=null==t||null==(u=t[j])?void 0:u.title)?f:""," + ")+"".concat(null!=(v=null==o||null==(d=o[I])?void 0:d.title)?v:""," \xb7 ")+"".concat(null!=F?F:""," \xb7 ").concat(null!=H?H:"")).replace(/\s+/g," ").trim(),ei=_.slice();b({subject:g({doNum:en,noNum:el}),attrs:ei,meta:{Descripcion:ea,Precio:Q},links:{Storefront:location.origin},attachPreviews:!0,attachOverlayAll:!0});let eo=ev();ef(C,et.variantId,R,_,eo,"/checkout")}catch(e){alert("No se pudo iniciar el checkout: ".concat(e.message))}}async function ex(){try{var e,n,l,r,a,i,s,c,u,d,f,v;let _=await eb();if(!await eg(2e4))throw Error("designer-not-ready");let S=(null==(n=window.doboDesignAPI)||null==(e=n.getCanvas)?void 0:e.call(n))||null;if(!S)throw Error("canvas-missing");let k=h(null==o?void 0:o[I]),N=h(null==t?void 0:t[j]),P=e=>2e3>(e||"").length,D=e=>!!e&&(!!e&&(/text/i.test(e.type||"")||"string"==typeof e.text)||Array.isArray(e._objects)&&e._objects.some(D)),T=e=>!!e&&((e=>{if(!e)return!1;let t=(e.name||e.id||e.doboKind||e.role||"").toLowerCase();return/(^(base|pot|maceta|plant|planta|bg|background)$)|(^|_|-)(pot|maceta|plant|planta|base|bg|background)(_|-|$)/.test(t)})(e)||Array.isArray(e._objects)&&e._objects.some(T)),A=[],E=e=>{var t,n;let l=t=>{t&&(e(t)&&(A.push(t),t.__vis=t.visible,t.visible=!1),Array.isArray(t._objects)&&t._objects.forEach(l))};if(((null==(t=S.getObjects)?void 0:t.call(S))||[]).forEach(l),S.backgroundImage&&e(S.backgroundImage)){let e=S.backgroundImage;A.push(e),e.__vis=e.visible,e.visible=!1}null==(n=S.requestRenderAll)||n.call(S)},L=()=>{var e;A.forEach(e=>{e.visible=!1!==e.__vis,delete e.__vis}),A.length=0,null==(e=S.requestRenderAll)||e.call(S)},M=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return S.toDataURL({format:"png",multiplier:e,backgroundColor:null})},z=e=>new Promise((t,n)=>{if(!e)return n(Error("no-url"));let l=new Image;l.crossOrigin="anonymous",l.onload=()=>t(l),l.onerror=e=>n(e),l.src=e}),U=async e=>{let{overlayAllUrl:t,potUrl:n,plantUrl:l}=e,[r,a,i]=await Promise.all([z(t),n?z(n).catch(()=>null):Promise.resolve(null),l?z(l).catch(()=>null):Promise.resolve(null)]),o=r.naturalWidth||r.width||1024,s=r.naturalHeight||r.height||1024,c=document.createElement("canvas");c.width=o,c.height=s;let u=c.getContext("2d");return a&&u.drawImage(a,0,0,o,s),i&&u.drawImage(i,0,0,o,s),u.drawImage(r,0,0,o,s),c.toDataURL("image/png")};await new Promise(e=>setTimeout(e,50)),E(e=>T(e)||e===S.backgroundImage);let X=M(2);L(),E(e=>T(e)||e===S.backgroundImage),E(e=>!D(e));let q=M(2);L(),E(e=>T(e)||e===S.backgroundImage),E(e=>D(e));let B=M(2);L();let W="";try{W=await U({overlayAllUrl:X,potUrl:k,plantUrl:N})}catch(e){W=M(2)}P(q)&&(q=""),P(B)&&X&&!P(X)&&(B=X);let J=p(_,"designpreview"),Y=J||W||X;X=await m(X,"overlay-all"),B=await m(B,"layer-image"),q=q?await m(q,"layer-text"):"";let G=await m(Y,"preview-full"),$=(e,t)=>{t&&(_=[..._.filter(t=>t.key!==e&&t.key!=="_".concat(e)),{key:e,value:t}])};$(J?"Preview:Full":"DesignPreview",G),$("Overlay:All",X),$("Layer:Image",B),$("Layer:Text",q);let V=(null==O?void 0:O.price)?y(O.price):x(o[I]),K=w(t[j]),Q=Number(((V+K)*R).toFixed(2)),Z=J||G||X,ee=await fetch("/api/design-product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"DOBO ".concat(null==(l=t[j])?void 0:l.title," + ").concat(null==(r=o[I])?void 0:r.title),previewUrl:Z,price:Q,color:H||"\xdanico",size:F||"\xdanico",designId:null==(a=_.find(e=>"_DesignId"===e.key))?void 0:a.value,plantTitle:(null==(i=t[j])?void 0:i.title)||"Planta",potTitle:(null==(s=o[I])?void 0:s.title)||"Maceta"})}),et=await ee.json();if(!ee.ok||!(null==et?void 0:et.variantId))throw Error((null==et?void 0:et.error)||"No se cre\xf3 el producto DOBO");let en=((null==(c=_.find(e=>"_DesignId"===e.key))?void 0:c.value)||"").toString().slice(-8).toUpperCase(),el=String(et.variantId||"").includes("gid://")?String(et.variantId).split("/").pop():String(et.variantId);if($("_DO",en),$("_NO",el),!await eg(2e4))throw Error("designer-not-ready");let er=await eh(et.variantId);if(!(null==er?void 0:er.ok))throw Error((null==er?void 0:er.error)||"publish failed");let ea=("DOBO ".concat(null!=(f=null==t||null==(u=t[j])?void 0:u.title)?f:""," + ")+"".concat(null!=(v=null==o||null==(d=o[I])?void 0:d.title)?v:""," \xb7 ")+"".concat(null!=F?F:""," \xb7 ").concat(null!=H?H:"")).replace(/\s+/g," ").trim(),ei=_.slice();b({subject:g({doNum:en,noNum:el}),attrs:ei,meta:{Descripcion:ea,Precio:Q},links:{Storefront:location.origin},attachPreviews:!0,attachOverlayAll:!0});let eo=ev();ef(C,et.variantId,R,_,eo,"/cart")}catch(e){alert("No se pudo a\xf1adir: ".concat(e.message))}}let ew=(e,t)=>({prev:()=>t(t=>t>0?t-1:Math.max(e.length-1,0)),next:()=>t(t=>t<e.length-1?t+1:0)}),ej=ew(t,D),e_=ew(o,T),eS=P(Z,ej),ek=P(ee,e_),eN=(null==O||null==(e=O.price)?void 0:e.currencyCode)||"CLP",eP=(()=>{let e=o[I],n=t[j],l=(null==O?void 0:O.price)?y(O.price):x(e);return l+w(n)+E.reduce((e,t)=>{var n,l;let r=u[t],a=null==r||null==(l=r.variants)||null==(n=l[0])?void 0:n.price;return e+(a?y(a):w(r))},0)})()*R,eC=(()=>{let e=o[I],n=t[j],l=(null==O?void 0:O.compareAtPrice)?y(O.compareAtPrice):(null==O?void 0:O.price)?y(O.price):x(e);return l+w(n)+E.reduce((e,t)=>{var n,l,r,a,i,o;let s=u[t];return e+y(null!=(o=null!=(i=null==s||null==(l=s.variants)||null==(n=l[0])?void 0:n.compareAtPrice)?i:null==s||null==(a=s.variants)||null==(r=a[0])?void 0:r.price)?o:null==s?void 0:s.minPrice)},0)})()*R;return(0,i.useEffect)(()=>{(async()=>{let e=new URLSearchParams(window.location.search).get("designUrl");if(!e)return;let t=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e4,t=Date.now();for(;Date.now()-t<e;){let e=window.doboDesignAPI;if(e&&(e.importDesignSnapshot||e.loadDesignSnapshot||e.loadJSON||e.loadFromJSON))return e;await new Promise(e=>setTimeout(e,100))}return null},n=await t();if(n)try{var l;null==n||null==(l=n.reset)||l.call(n);let t=await fetch(e,{cache:"no-store"});if(!t.ok)return;let r=await t.json(),a=(null==r?void 0:r.design)||r;es.current=(null==r?void 0:r.meta)||(null==r?void 0:r.doboMeta)||(null==a?void 0:a.meta)||null,en(es.current),n.importDesignSnapshot?await n.importDesignSnapshot(a):n.loadDesignSnapshot?await n.loadDesignSnapshot(a):n.loadJSON?await n.loadJSON(a):n.loadFromJSON&&await new Promise(e=>n.loadFromJSON(a,()=>{var t;null==(t=n.requestRenderAll)||t.call(n),e()}))}catch(e){console.error("load designUrl failed",e)}})()},[]),console.log(">> INDEX.JS REAL EJECUT\xc1NDOSE <<"),(0,l.jsxs)("div",{style:{paddingBottom:"150px"},className:"jsx-88044b09b2b99c26 "+"container mt-lg-3 mt-0 ".concat(s().container),children:[(0,l.jsxs)("div",{className:"jsx-88044b09b2b99c26 row justify-content-center align-items-start gx-5 gy-4",children:[(0,l.jsxs)("div",{className:"jsx-88044b09b2b99c26 col-lg-5 col-md-8 col-12 text-center",children:[(0,l.jsx)("div",{role:"group","aria-label":"Tama\xf1o",className:"jsx-88044b09b2b99c26 btn-group mb-3",children:["Peque\xf1o","Mediano","Grande"].map(e=>(0,l.jsx)("button",{onClick:()=>{er.current=!0,ea.current=!0,Y(e)},className:"jsx-88044b09b2b99c26 "+"btn btn-sm ".concat(F===e?"btn-dark":"btn-outline-secondary"),children:e},e))}),(0,l.jsxs)("div",{ref:$,style:{width:"100%",maxWidth:"500px",aspectRatio:"500 / 650",backgroundImage:"url('/images/fondo-dobo.jpg')",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",borderRadius:"20px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:"pan-y",userSelect:"none"},className:"jsx-88044b09b2b99c26 position-relative",children:[(0,l.jsx)(k,{count:t.length,current:j,onSelect:e=>D(e),position:"top"}),(0,l.jsx)("button",{onClick:()=>D(e=>e>0?e-1:t.length-1),className:"jsx-88044b09b2b99c26 "+"".concat(s().chev," ").concat(s().chevTopLeft),children:(0,l.jsx)("svg",{viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",className:"jsx-88044b09b2b99c26",children:(0,l.jsx)("path",{d:"M15 18l-6-6 6-6",className:"jsx-88044b09b2b99c26"})})}),(0,l.jsx)("button",{onClick:()=>D(e=>e<t.length-1?e+1:0),className:"jsx-88044b09b2b99c26 "+"".concat(s().chev," ").concat(s().chevTopRight),children:(0,l.jsx)("svg",{viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",className:"jsx-88044b09b2b99c26",children:(0,l.jsx)("path",{d:"M9 6l6 6-6 6",className:"jsx-88044b09b2b99c26"})})}),(0,l.jsx)(k,{count:o.length,current:I,onSelect:e=>T(e),position:"bottom"}),(0,l.jsx)("button",{onClick:()=>T(e=>e>0?e-1:o.length-1),className:"jsx-88044b09b2b99c26 "+"".concat(s().chev," ").concat(s().chevBottomLeft),children:(0,l.jsx)("svg",{viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",className:"jsx-88044b09b2b99c26",children:(0,l.jsx)("path",{d:"M15 18l-6-6 6-6",className:"jsx-88044b09b2b99c26"})})}),(0,l.jsx)("button",{onClick:()=>T(e=>e<o.length-1?e+1:0),className:"jsx-88044b09b2b99c26 "+"".concat(s().chev," ").concat(s().chevBottomRight),children:(0,l.jsx)("svg",{viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",className:"jsx-88044b09b2b99c26",children:(0,l.jsx)("path",{d:"M9 6l6 6-6 6",className:"jsx-88044b09b2b99c26"})})}),(0,l.jsx)("div",{ref:V,"data-capture-stage":"1",style:{height:"100%",width:"100%","--zoom":.75,transform:"scale(var(--zoom))",transformOrigin:"50% 70%",position:"relative",willChange:"transform",backfaceVisibility:"hidden",touchAction:"pan-y",userSelect:"none"},className:"jsx-88044b09b2b99c26",children:(0,l.jsxs)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%",pointerEvents:"none"},className:"jsx-88044b09b2b99c26",children:[(0,l.jsx)("div",{style:{position:"absolute",bottom:"0%",left:"50%",transform:"translateX(-50%)",transformOrigin:"top center",zIndex:2,pointerEvents:"auto"},className:"jsx-88044b09b2b99c26",children:(0,l.jsx)("div",{ref:Q,onPointerDownCapture:e=>ec(e,ei),onPointerUpCapture:e=>eu(e,ei,ew(o,T)),...ek,className:"jsx-88044b09b2b99c26 "+(ek&&null!=ek.className&&ek.className||s().carouselContainer||""),children:(0,l.jsx)("div",{style:{transform:"translateX(-".concat(100*I,"%)"),transformOrigin:"top center"},className:"jsx-88044b09b2b99c26 "+(s().carouselTrack||""),children:o.map((e,t)=>{let n=(t===I?(null==O?void 0:O.image)||(null==O?void 0:O.imageUrl):null)||e.image;return(0,l.jsx)("div",{className:"jsx-88044b09b2b99c26 "+(s().carouselItem||""),children:(0,l.jsx)("img",{src:n,className:"jsx-88044b09b2b99c26 "+(s().carouselImage||"")})},e.id)})})})}),(0,l.jsx)("div",{style:{position:"absolute",bottom:"60%",left:"50%",transform:"translateX(-50%)",transformOrigin:"bottom center",zIndex:3,pointerEvents:"auto"},className:"jsx-88044b09b2b99c26",children:(0,l.jsx)("div",{ref:K,onPointerDownCapture:e=>ec(e,eo),onPointerUpCapture:e=>eu(e,eo,ew(t,D)),...eS,className:"jsx-88044b09b2b99c26 "+(eS&&null!=eS.className&&eS.className||s().carouselContainer||""),children:(0,l.jsx)("div",{style:{transform:"translateX(-".concat(100*j,"%)"),transformOrigin:"bottom center"},className:"jsx-88044b09b2b99c26 "+(s().carouselTrack||""),children:t.map(e=>(0,l.jsx)("div",{className:"jsx-88044b09b2b99c26 "+(s().carouselItem||""),children:(0,l.jsx)("img",{src:e.image,className:"jsx-88044b09b2b99c26 "+"".concat(s().carouselImage," ").concat(s().plantImageOverlay)})},e.id))})})})]})})]}),(0,l.jsx)("div",{id:"dobo-menu-dock",className:"jsx-88044b09b2b99c26 "+(s().menuDock||"")})]}),(0,l.jsx)(N,{mode:"both",stageRef:V,anchorRef:Q,containerRef:$,docked:!1}),(0,l.jsxs)("div",{className:"jsx-88044b09b2b99c26 col-lg-5 col-md-8 col-12",children:[o.length>0&&t.length>0&&(0,l.jsxs)("div",{className:"jsx-88044b09b2b99c26 text-center",children:[(0,l.jsxs)("div",{style:{marginTop:20},className:"jsx-88044b09b2b99c26 d-flex justify-content-center align-items-baseline gap-3 mb-4",children:[eC>eP&&(0,l.jsx)("p",{style:{marginTop:8,fontSize:"1.2rem",color:"#6c757d"},className:"jsx-88044b09b2b99c26",children:(0,l.jsx)("span",{style:{textDecoration:"line-through"},className:"jsx-88044b09b2b99c26",children:v(eC,eN)})}),(0,l.jsx)("span",{style:{fontWeight:"bold",fontSize:"3rem"},className:"jsx-88044b09b2b99c26",children:v(eP,eN)})]}),q.length>0&&(0,l.jsxs)("div",{className:"jsx-88044b09b2b99c26 mb-4",children:[(0,l.jsx)("h5",{className:"jsx-88044b09b2b99c26",children:"Color"}),(0,l.jsx)("div",{className:"jsx-88044b09b2b99c26 d-flex justify-content-center gap-3 flex-wrap",children:q.map((e,t)=>{let n=(e=>{let t=String(e&&e.hex||e||"").trim();if(/^#([0-9a-f]{3}){1,2}$/i.test(t))return t;let n=String(t||"").toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").replace(/(claro|oscuro|mate|brillante|satinado|metalico|metalic|pastel)\b/g,"$1").trim();if(ed[n])return ed[n];for(let e of n.split(/[\/,-]/).map(e=>e.trim()))if(ed[e])return ed[e];return"#ccc"})(e),r="#ffffff"===n.toLowerCase()||"#fff"===n.toLowerCase(),a=H===e;return(0,l.jsx)("div",{onClick:()=>X(e),title:e,"aria-label":e,"aria-selected":a,style:{width:40,height:40,borderRadius:"50%",backgroundColor:n,border:a?"3px solid #000":r?"1px solid #999":"1px solid #ccc",boxShadow:a?"0 0 0 3px rgba(0,0,0,0.15) inset":"none",cursor:"pointer",transition:"transform .12s ease"},className:"jsx-88044b09b2b99c26"},t)})})]}),u&&u.length>0&&(0,l.jsxs)("div",{className:"jsx-88044b09b2b99c26 mb-4 mt-4",children:[(0,l.jsx)("h5",{className:"jsx-88044b09b2b99c26",children:"Accesorios"}),(0,l.jsx)("div",{className:"jsx-88044b09b2b99c26 d-flex justify-content-center gap-3 flex-wrap",children:u.map((e,t)=>{var n,r;let a=(null==e||null==(n=e.image)?void 0:n.src)||(null==e?void 0:e.image)||Array.isArray(null==e?void 0:e.images)&&(null==(r=e.images[0])?void 0:r.src)||"/placeholder.png",i=(null==e?void 0:e.title)||(null==e?void 0:e.name)||"Accesorio ".concat(t+1),o=E.includes(t);return(0,l.jsx)("div",{onClick:n=>{L(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]),U({visible:!0,x:("number"==typeof(null==n?void 0:n.clientX)?n.clientX:0)+16,y:("number"==typeof(null==n?void 0:n.clientY)?n.clientY:0)+16,html:_(a,i,(null==e?void 0:e.description)||(null==e?void 0:e.body_html)||"")})},onMouseEnter:t=>{U({visible:!0,x:("number"==typeof(null==t?void 0:t.clientX)?t.clientX:0)+16,y:("number"==typeof(null==t?void 0:t.clientY)?t.clientY:0)+16,html:_(a,i,(null==e?void 0:e.description)||(null==e?void 0:e.body_html)||"")})},onMouseMove:e=>U(t=>t.visible?{...t,x:e.clientX+16,y:e.clientY+16}:t),onMouseLeave:()=>U(e=>({...e,visible:!1})),"aria-label":i,style:{border:o?"3px solid black":"1px solid #ccc",borderRadius:"12px",padding:"6px",cursor:"zoom-in",width:"100px",height:"100px",overflow:"hidden",transition:"transform 0.2s ease"},className:"jsx-88044b09b2b99c26",children:(0,l.jsx)("img",{src:a,alt:i,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"6px"},className:"jsx-88044b09b2b99c26"})},(null==e?void 0:e.id)||t)})})]}),(0,l.jsxs)("div",{className:"jsx-88044b09b2b99c26 d-flex flex-column align-items-center mb-5",children:[(0,l.jsxs)("div",{className:"jsx-88044b09b2b99c26 mb-3 text-center",children:[(0,l.jsx)("label",{className:"jsx-88044b09b2b99c26 form-label d-block",children:"Cantidad"}),(0,l.jsxs)("div",{style:{maxWidth:200,margin:"0 auto"},className:"jsx-88044b09b2b99c26 input-group justify-content-center",children:[(0,l.jsx)("button",{onClick:()=>M(e=>Math.max(1,e-1)),className:"jsx-88044b09b2b99c26 btn btn-outline-secondary",children:"-"}),(0,l.jsx)("input",{type:"number",value:R,min:"1",max:"1000",onChange:e=>{let t=e.target.value;if(/^\d*$/.test(t)){let e=parseInt(t,10);!isNaN(e)&&e>=1&&e<=1e3?M(e):""===t&&M("")}},onBlur:e=>{let t=parseInt(e.target.value,10);isNaN(t)||t<1?M(1):t>1e3&&M(1e3)},className:"jsx-88044b09b2b99c26 form-control text-center"}),(0,l.jsx)("button",{onClick:()=>M(e=>Math.min(1e3,e+1)),className:"jsx-88044b09b2b99c26 btn btn-outline-secondary",children:"+"})]})]}),(0,l.jsxs)("div",{className:"jsx-88044b09b2b99c26 d-flex gap-3",children:[(0,l.jsx)("button",{onClick:ex,className:"jsx-88044b09b2b99c26 btn btn-outline-dark px-4 py-2",children:"A\xf1adir al carro"}),(0,l.jsx)("button",{onClick:ey,className:"jsx-88044b09b2b99c26 btn btn-dark px-4 py-2",children:"Comprar ahora"})]})]})]}),(0,l.jsxs)("div",{style:{maxWidth:500,margin:"0 auto"},className:"jsx-88044b09b2b99c26 text-start px-3 mb-4",children:[(0,l.jsx)("h6",{className:"jsx-88044b09b2b99c26",children:(0,l.jsx)("strong",{className:"jsx-88044b09b2b99c26",children:"Planta"})}),(()=>{let e=t[j],n=null==e?void 0:e.descriptionHtml,r=null==e?void 0:e.description;return n?(0,l.jsx)("div",{style:{fontSize:"1.2rem"},dangerouslySetInnerHTML:{__html:n},className:"jsx-88044b09b2b99c26"}):(0,l.jsx)("p",{style:{fontSize:"1.2rem"},className:"jsx-88044b09b2b99c26",children:r||"Descripci\xf3n no disponible."})})(),(0,l.jsx)("h6",{className:"jsx-88044b09b2b99c26 mt-3",children:(0,l.jsx)("strong",{className:"jsx-88044b09b2b99c26",children:"Maceta"})}),(()=>{let e=o[I],t=null==e?void 0:e.descriptionHtml,n=null==e?void 0:e.description;return t?(0,l.jsx)("div",{style:{fontSize:"1.2rem"},dangerouslySetInnerHTML:{__html:t},className:"jsx-88044b09b2b99c26"}):(0,l.jsx)("p",{style:{fontSize:"1.2rem"},className:"jsx-88044b09b2b99c26",children:n||"Descripci\xf3n no disponible."})})()]})]})]}),(0,l.jsx)(S,{visible:z.visible,x:z.x,y:z.y,html:z.html,onClose:()=>U(e=>({...e,visible:!1}))}),(0,l.jsx)(a(),{id:"88044b09b2b99c26",children:".pot-carousel--locked{pointer-events:none;-webkit-user-select:none;user-select:none;-webkit-user-drag:none;touch-action:none;overflow:hidden!important;scrollbar-width:none}.pot-carousel--locked::-webkit-scrollbar{display:none}"})]})}}},e=>{e.O(0,[465,636,593,792],()=>e(e.s=2936)),_N_E=e.O()}]);